# dgfly

这个项目是我本人用的一套js埋点接口，以及一些常用需求的工具封装  
经过一周的探索基本思路已经成型了  

## 思路

### 抽象类
使用抽象类约束埋点数据，和上传函数，统一一下函数调用，例如：  
我可以在A公司，实行A公司的埋点数据标准，只需在**上传函数**中使用**工具函数**或自己实现的函数，组装A公司的埋点数据标准。
也可以使用例如 神策数据 / 友盟 埋点的 sdk 去实现这个抽象类。  
那么，我就得到了一个可以用于任何项目的埋点标准。

### 工具函数
我针对一些我自己的需求，实现了一些工具函数，可以组合这些工具函数，快速搭建起一个埋点功能。

#### paparazzi 搜集客户端信息
搜集例如 userAgent screen language 信息。

#### LinkNode
针对人浏览页面或者触发事件的场景，总有一个当前与历史，并有查看上一场景/事件的需求，这里用链表来存储了这个数据。  
当当前场景需要触发事件时 通过访问 curr.prev 获取上一个 node 的 key  

#### duration
统计时常用的工具，将事件根据互斥分组，触发同组事件，会结束上一事件。结束时统计一个时常。

#### log
帮助监听一下 error 事件。

### 示例页面
有了这么多工具函数，我可以利用，不同工具函数，写出多个需求下的示例页面，这才是我想要的，我会把我经历过的需求，作为示例页面留存在这个项目中。